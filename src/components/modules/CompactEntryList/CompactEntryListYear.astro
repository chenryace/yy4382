---
import { interval } from "./CompactEntryList.astro";
interface Props {
  year: string;
  order: number;
  animated?: boolean;
}
const { year, order, animated = true } = Astro.props;
console.log(year, order);
---

<div
  class:list={[
    "relative select-none pointer-events-none h-12 sm:h-20",
    animated && "animate-onload opacity-0",
  ]}
  style={`animation-delay: ${order * 2 * interval}ms;`}
>
  {/* https://stackoverflow.com/a/73146972 */}
  <span
    class="absolute text-8xl sm:text-[9rem] leading-none font-bold text-transparent top-4 -left-4 [-webkit-text-stroke:4px_theme('colors.content.200')] opacity-10"
  >
    {year}
    <span
      class="absolute left-0 text-card [-webkit-text-stroke:0] pointer-events-none"
    >
      {year}
    </span>
  </span>
</div>
<ul
  class:list={[
    "timeline-dot -ml-3 md:ml-0 flex flex-col gap-4",
    animated && "animate-onload opacity-0",
  ]}
  style={`animation-delay: ${(order * 2 + 1) * interval}ms;`}
>
  <slot />
</ul>

<style is:global>
  .timeline-dot > li.timeline-dot-item {
    @apply relative pl-6;
    &::after {
      content: "";
      @apply absolute size-2 z-10 rounded-full bg-content-50
        left-2 top-1/2 -translate-y-1/2
        outline outline-2 outline-card hover:outline-none
        hover:h-5 hover:w-1 hover:left-2.5 hover:bg-primary transition-all;
    }
    &::before {
      content: "";
      @apply h-[calc(100%+1rem)] absolute top-1/2 -translate-y-1/2 left-[calc(1.5rem/2-1px)] border-l-[2px] pointer-events-none border-content-50 opacity-30 transition;
    }
    &:first-child::before {
      @apply h-[calc(50%+0.5rem)] top-1/2 translate-y-0;
    }
    &:last-child::before {
      @apply h-[calc(50%+0.5rem)] top-[unset] bottom-1/2 translate-y-0;
    }
  }
</style>
