---
// Calculate the number of articles, words, and tags
import { getCollection } from "astro:content";
const posts = await getCollection("post");
let articles = posts.length;
let words = 0;
for (const post of posts) {
  const { remarkPluginFrontmatter } = await post.render();
  words += remarkPluginFrontmatter.words;
}
const tags = [...new Set(posts.map((post) => post.data.tags).flat())].length;

import Card from "../base/Card.astro";
const name = "Yunfi";
const avatar = "/ava.webp";
const description = "Undergraduate";
---

<Card class="w-full pb-4">
  <div class="flex flex-col items-center">
    <div class="w-48 lg:w-full mt-4 lg:mt-0">
      <img
        class="rounded-full lg:w-full lg:rounded-xl lg:shadow-lg"
        src={avatar}
        alt="Yunfi avatar"
      />
    </div>
    <h5 class="mt-3 mb-1 text-2xl font-medium text-gray-900 dark:text-white">
      <div
        class="transition-colors flex items-center gap-2"
      >
        {name}
      </div>
    </h5>
    <span class="text-sm text-gray-500 dark:text-gray-400">{description}</span>
    <div class="flex mt-2">
      <div class="flex flex-col items-center mx-4">
        <span class="text-lg font-semibold text-gray-900 dark:text-white">
          {articles}
        </span>
        <span class="text-sm text-gray-500 dark:text-gray-400">文章</span>
      </div>
      <div class="flex flex-col items-center mx-4">
        <span class="text-lg font-semibold text-gray-900 dark:text-white">
          {(words / 10000).toFixed(1)}
        </span>
        <span class="text-sm text-gray-500 dark:text-gray-400">万字</span>
      </div>
      <div class="flex flex-col items-center mx-4">
        <span class="text-lg font-semibold text-gray-900 dark:text-white">
          {tags}
        </span>
        <span class="text-sm text-gray-500 dark:text-gray-400">标签</span>
      </div>
    </div>
  </div>
</Card>
