---
import type { CollectionEntry } from "astro:content";
interface Props {
  post: CollectionEntry<"post">;
}
import PostAttr from "./PostAttr.astro";
const { post } = Astro.props;
import { renderDesp } from "../utils/mdUtils";

let desc = "";
if (post.data.description === undefined) {
  desc = await renderDesp(post.body);
} else {
  desc = post.data.description || "";
}
---

<div
  class="card-color rounded-xl relative px-4 lg:px-8 py-4 lg:py-8 flex flex-col gap-2 lg:gap-4"
>
  <a
    href={"/post/" + post.slug}
    class="transition relative
          text-xl lg:text-3xl font-semibold tracking-tight text-black/90 dark:text-white/90 hover:text-primary dark:hover:text-primary_d
          before:w-1 before:h-5 before:rounded-md before:bg-primary
          before:absolute before:top-2 before:-left-4 before:hidden lg:before:block"
  >
    <h5>
      {post.data.title}
    </h5>
  </a>
  <PostAttr post={post} />
  <div class="custom-md card-desp" set:html={desc} />
</div>
