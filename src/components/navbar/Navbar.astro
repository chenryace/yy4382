---
import { navMenu, type NavMenu } from "@config";
import { siteConfig } from "@config";
import { Icon } from "astro-icon/components";
import MobileMenu from "@comp/navbar/MobileMenu.vue";
import Card from "@comp/base/Card.astro";
import NavContainer from "@comp/navbar/NavContainer.vue";
import { Image } from "astro:assets";
import logo from "@assets/logo.jpeg";
interface Props {
  navStats: NavMenu | string | undefined;
}
const { navStats } = Astro.props;
---

<Card
  class="rounded-t-none h-16 px-3 min-h-16 flex justify-between items-center"
>
  <div class="md:hidden h-8"><MobileMenu client:load /></div>
  <div class="self-center">
    <a class="flex items-center text-xl" href="/">
      <Image
        src={logo}
        alt="logo"
        loading={"eager"}
        class="w-8 h-8 rounded-lg mr-3"
        widths={[80, 160]}
      />
      <span class="hidden md:inline">{siteConfig.title}</span>
    </a>
  </div>
  <div class="hidden md:flex h-full items-center space-x-1">
    {
      navMenu.map((item) => {
        let highlight = false;
        if (navStats === undefined && item.text === "更多") highlight = true;
        else if (typeof navStats === "string" && navStats === item.text)
          highlight = true;
        else if (typeof navStats === "object" && navStats.text === item.text)
          highlight = true;
        return <NavContainer client:load nav={item} highlight={highlight} />;
      })
    }
  </div>
  <a href="/search" aria-label="Search Button">
    <Icon name={"mingcute:search-2-line"} size={32} />
  </a>
</Card>
