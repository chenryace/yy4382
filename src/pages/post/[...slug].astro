---
import { getCollection } from "astro:content";
import MDPost from "../../layouts/MDPost.astro";

export async function getStaticPaths() {
  const blogEntries = await getCollection("post");
  return blogEntries
    .sort(
      (a, b) =>
        new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
    )
    .map((entry, i) => ({
      params: { slug: entry.slug },
      props: { entry, prev: blogEntries[i - 1], next: blogEntries[i + 1] },
    }));
}

const { entry, prev, next } = Astro.props;

const { Content, headings } = await entry.render();
---

<MDPost post={entry} headings={headings} prev={prev} next={next}>
  <Content />
</MDPost>
