---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Article from "../components/views/Article.astro";
import { getDesc } from "../utils/mdUtils";
export async function getStaticPaths() {
  const pages = await getCollection("page");
  return pages.map((page) => ({
    params: { page: page.slug },
    props: { page },
  }));
}
const { page } = Astro.props;
const { Content, headings } = await page.render();
const desc = page.data.description || getDesc(page.body);
import { Seo } from "../config";
import SideBar from "../components/sidebar/SideBar.astro";
const seoConfig = new Seo(
  page.data.title,
  desc,
  Astro.url.origin + page.data.image,
  "article",
).get();
---

<BaseLayout seoConfig={seoConfig}>
  <Article entry={page}>
    <Content />
  </Article>
  <Fragment slot="sidebar">
    <SideBar tocList={headings} />
  </Fragment>
</BaseLayout>
